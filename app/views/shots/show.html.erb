<div class="shot-wrapper">
	<!-- name, title, show, action, action detail -->
	<div class="main-wrapper">
		<div class="info-container">
			<div class="main-info">
				<div class="name"><%= @shot.name %></div>
				<span class="creator">by <span><a href="#"><%= @shot.user.name %></a></span></span>
				<span class="created-time"><%= @shot.created_at.strftime("%b %d, %Y") %></span>
			</div>
			<div class="person-number">
				<div class="lsf-icon" title="user"></div>
				<div class="number"><%= @shot.person_number %></div>
			</div>		
		</div>

		<div class="view-container">
			<div class="view-operation">
				<ul class="clear-fix">
					<li>1x</li>
					<li>2x</li>
					<li>4x</li>
				</ul>
			</div>
			<svg id="canvas" class="canvas" width="350" height="350"></svg>
		</div>

		<div class="action-container">
			<div class="like-box">
				<div class="number">153</div>
				<div class="text">likes</div>
				<span class="lsf-icon" title="heartempty"></span>
			</div>
			<div class="share-box">
				<div class="number">0</div>
				<div class="text">share</div>
				<span class="lsf-icon" title="share"></span>
			</div>
			<div class="fork-box">
				<div class="number">0</div>
				<div class="text">fork</div>
				<span class="lsf-icon" title="dish"></span>
			</div>
		</div>
	</div>

	<!-- colot list, description, comment,  -->
	<div class="detail-wrapper">
		<div class="color-container">
			<!-- <ul>
				<li></li>
				<li></li>
				<li></li>
			</ul> -->
		</div>
		<div class="description-container">
			
		</div>
		<div class="comment-container">
			<div class="comment-number">13 Responses</div>
			<div class="comment-list">
				<div class="comment-block">
					<div class="thumbnail"><img src="http://1.bp.blogspot.com/-k5XaBDOKiMY/UdjlSeFESbI/AAAAAAAABnQ/4gVl6okwqSM/s1600/Avatar.jpg" alt=""></div>
					<div class="name lsf-icon" title="quote"><%= current_user.name %></div>

					<textarea id="comment-field" type="textarea" class="comment-focus-group comment-field" placeholder="say something . . ."></textarea>
					<div id="send-comment" class="comment-focus-group lsf-icon finished-btn" title="ok">送出</div>

				</div>
				<% @comments.each do |comment| %>
				<div class="comment-block">
					<div class="thumbnail"><img src="http://1.bp.blogspot.com/-k5XaBDOKiMY/UdjlSeFESbI/AAAAAAAABnQ/4gVl6okwqSM/s1600/Avatar.jpg" alt=""></div>
					<div class="name lsf-icon" title="quote"><%= comment.user.name %></div>
					<div class="comment"><%= comment.content %></div>
				</div>
				<% end %>
			</div>
		</div>

	</div>
</div>

<script>
  var PageWidget = {};
	$(document).on('page:change',function() {
    PageWidget.init();
	});

	var ps;
	PageWidget = {
		settings:{

		},
		init: function(){
      ShowWidget.generateShow('#canvas',10,ShowWidget.convertStrToCodeArr("<%= @shot.data %>"));
      PageWidget.bindUIActions();
		},
		bindUIActions: function(){
      $("#send-comment").click(function() {
        PageWidget.sendComment($("#comment-field"));
      });
      $("#comment-field").click(function(){
        $(this).addClass('active');
      });
      $(document).on("click",function(event) {
        if(!$(event.target).hasClass("comment-focus-group")){
          PageWidget.unactiveCommentField();
        }
      });
		},
    unactiveCommentField: function() {
      $("#comment-field").removeClass("active");
    },
    clearCommentField:function() {
      $("#comment-field").val("");
      PageWidget.unactiveCommentField();

    },
		sendComment: function($commentObj){
      var content = $commentObj.val();
			$.ajax({
        url:"<%= show_comment_path(@shot) %>",
        type:"POST",
        dataType:"JSON",
        data:{
          content:content
        },
        success:function() {
          PageWidget.clearCommentField();
        }

			});
		}
	}


</script>